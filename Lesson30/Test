pipeline {
    agent any
    
    parameters {
        string(name: 'IMAGE_NAME', defaultValue: 'tms-app', description: 'Docker image name')
        string(name: 'IMAGE_TAG', defaultValue: 'latest', description: 'Docker image tag')
        string(name: 'CONTAINER_NAME', defaultValue: 'tms-app-dev', description: 'Container name')
        string(name: 'HOST_PORT', defaultValue: '9090', description: 'Host port')
        booleanParam(name: 'SKIP_DOCKER', defaultValue: false, description: 'Skip real Docker operations')
    }
    
    stages {
        stage('Initialize') {
            steps {
                echo "ðŸš€ Test Pipeline"
                script {
                    echo "Build: ${BUILD_NUMBER}"
                    echo "Params: ${params}"
                }
            }
        }
        
        stage('Checkout') {
            steps {
                checkout scm
            }
        }
        
        stage('Test Docker') {
            steps {
                script {
                    echo "ðŸ”§ Testing Docker..."
                    sh '''
                        echo "Current dir: $(pwd)"
                        echo "Directory contents:"
                        ls -la
                        echo ""
                        echo "Docker test:"
                        docker --version || echo "Docker not available"
                    '''
                }
            }
        }
    }
    
    post {
        always {
            echo "Pipeline completed"
        }
    }
}