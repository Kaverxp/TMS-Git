# –ó–∞–¥–∞–Ω–∏–µ ‚Ññ30: Jenkins Pipeline —Å Groovy –∏ DSL

## –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è
–ò–∑—É—á–µ–Ω–∏–µ –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ Jenkins pipeline, –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ Groovy –∏ —Ä–∞–±–æ—Ç–∞ —Å DSL job.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### 1. Jenkinsfile
–û—Å–Ω–æ–≤–Ω–æ–π –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π pipeline —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏ —ç—Ç–∞–ø–∞–º–∏:
- **Build** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞
- **Test** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤
- **Generate Report** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤ —á–µ—Ä–µ–∑ DSL
- **Execute Groovy Deployment** - –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Groovy —Å–∫—Ä–∏–ø—Ç
- **Verify Deployment** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è
- **Cleanup** - –æ—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 2. deploy.groovy
Groovy-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
- –°–æ–∑–¥–∞–Ω–∏–µ Docker-–æ–±—Ä–∞–∑–∞
- –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –ó–∞–ø—É—Å–∫ –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- Health check –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 3. report_dsl.py
DSL –Ω–∞ Python –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–æ–≤:
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç—á—ë—Ç–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤: HTML, JSON, TXT
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## –ó–∞–ø—É—Å–∫ –≤ Jenkins

### –°–ø–æ—Å–æ–± 1: –ò–∑ SCM (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Pipeline –≤ Jenkins
2. –£–∫–∞–∂–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
Definition: Pipeline script from SCM
SCM: Git
Repository URL: https://github.com/Kaverxp/TMS-Git.git
Script Path: Lesson30/Jenkinsfile
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

### –°–ø–æ—Å–æ–± 2: –ü—Ä—è–º–æ–π –≤–≤–æ–¥
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ Jenkinsfile
2. –í—Å—Ç–∞–≤—å—Ç–µ –≤ –ø–æ–ª–µ "Pipeline script"
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã deploy.groovy –∏ report_dsl.py –¥–æ—Å—Ç—É–ø–Ω—ã

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã Pipeline

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|----------------------|
| ENVIRONMENT | –¶–µ–ª–µ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ | dev, test, prod |
| IMAGE_TAG | –¢–µ–≥ Docker-–æ–±—Ä–∞–∑–∞ | v1.0 |
| RUN_TESTS | –ó–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã | true |
| GENERATE_REPORT | –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç | true |
| REPORT_FORMAT | –§–æ—Ä–º–∞—Ç –æ—Ç—á—ë—Ç–∞ | html, json, txt |

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é

1. **Jenkins** —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –ø–ª–∞–≥–∏–Ω–∞–º–∏:
- Pipeline
- Docker Pipeline
- Git

2. **–ê–≥–µ–Ω—Ç Jenkins** —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º:
- Docker
- Python 3.x
- Git

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ pipeline:
1. ‚úÖ –í—Å–µ —ç—Ç–∞–ø—ã –æ—Ç–º–µ—á–µ–Ω—ã –∑–µ–ª—ë–Ω—ã–º
2. üìÅ –°–æ–∑–¥–∞–Ω—ã –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤ –ø–∞–ø–∫–µ `generated_reports/`
3. üê≥ –ó–∞–ø—É—â–µ–Ω Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `lesson30`
4. üìä –î–æ—Å—Ç—É–ø–µ–Ω HTML-–æ—Ç—á—ë—Ç –≤ Jenkins (–µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω —Ñ–æ—Ä–º–∞—Ç HTML)

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

Pipeline –≤–∫–ª—é—á–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ñ–∞–π–ª–æ–≤
- –û—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –¥–µ–ø–ª–æ—è
- –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–æ–≤ –æ–± –æ—à–∏–±–∫–∞—Ö
- –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–∏ –ª—é–±–æ–º –∏—Å—Ö–æ–¥–µ

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è

1. **–£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ deploy.groovy
2. **DSL –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–æ–≤** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ report_dsl.py